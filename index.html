<!DOCTYPE html>
<!--Copyright [2020] [Indian Institute of Science, Bangalore & Tata Institute of Fundamental Research, Mumbai]
SPDX-License-Identifier: Apache-2.0-->
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <title>Epidemic Simulator (City-Scale)</title>
  <!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <link rel="stylesheet" href="simulator/css/font-awesome.min.css">
  <link rel="icon" type="image/png" sizes="32x32"
    href="https://iisc.ac.in/wp-content/themes/iisc/images/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96"
    href="https://iisc.ac.in/wp-content/themes/iisc/images/favicon/favicon-96x96.png">
    <link rel="stylesheet" href="simulator/css/custom.css">
</head>

<body>

  <div class="container-fluid">
    <div class="row">
      <nav class="navbar custom-header">
        <div class="navbar-header container-margin">
          <a class="navbar-brand" href="#">
            Epidemic Simulator (City-Scale)</a>
        </div>
      </nav>
    </div>
    <!-- <div class="row">
          <div class="col my-3">
            This is a city-scale agent-based simulator for the city of Bengaluru, built based on the descriptions given in this 
            <A HREF="https://www.imperial.ac.uk/mrc-global-infectious-disease-analysis/covid-19/report-9-impact-of-npis-on-covid-19/">
                study</A> of non-pharmaceutical interventions (from the Imperial College, London), this
            <A HREF="https://www.nature.com/articles/nature04017">paper</A> on pandemics in SE Asia, and its associated 
            <A HREF="https://static-content.springer.com/esm/art%3A10.1038%2Fnature04017/MediaObjects/41586_2005_BFnature04017_MOESM1_ESM.pdf">supplementary material</A>. <br><br>

            The simulator instantiates a smaller scale Bengaluru with population 100,000 across its 
            198 wards. The population distribution, employed fraction, age distribution, and 
            household size distribution are based on 2011 census data (with scaling for population growth).
            Commute distances, workplace sizes, and school sizes are based on Thailand data given in the aforementioned 
            <A HREF="https://static-content.springer.com/esm/art%3A10.1038%2Fnature04017/MediaObjects/41586_2005_BFnature04017_MOESM1_ESM.pdf">supplementary material</A>. 
            <br>
            The simulator creates a smaller scale city with 100,000 agents distributed across its 
            municipal wards. The reduced size is so that it can run on your browser. 
            The population distribution, 
            employed fraction, age distribution, and household size distribution are based on 
            the 2011 census data. Agents are assigned to households, schools or workplaces, and 
            community spaces. The epidemic then spreads in a stochastic fashion based on meetings
            that happen in the interaction spaces in our synthetic city.
            <br>
            <br>
            Choose one of the implemented interventions and see how the epidemic evolves.
            <br>
            <br>
            <em>A disclaimer: This tool is to help you understand the effectiveness of social distancing interventions related to COVID-19.
            The simulator's outputs should not be used for medical diagnostic, prognostic or treatment purposes or
            for guidance on personal travel plans.</em>
            <br><br>
            Note: best viewed on a desktop/laptop/tablet screen.
          </div>
          <div class="col-xl-4 col-sm-3 align-self-center justify-content-center p-3">
            <div class="h-75 d-inline-block">
                  <img src="simulator/images/bengaluru-wards_v2.png" id="mapImage" alt="city map" width="80%">
            </div>
          </div>
        </div> -->
    <div class="row splitter-container" id="MySplitter">
      <div class="col-sm-6 left-pane">
        <!-- <div class="row py-3 pl-2" >
                <div class="col"><b>You can adjust the following parameters before 
                    launching the simulator</b>
                </div>
                <div class="col">
                  <button type="button" class="btn btn-primary" id="run_button" onclick="clear_plots();">Run</button>
                <button type="button" class="btn btn-danger" id="sim_stop" style="display: none" onclick="stop_sim();">Stop Simulation</button>
                </div>
              </div> -->
              <form class="scroll">
                <p class="section-title">City Details</p>
                <hr class="line-separator"/>
                
                <div class="form-group row">
                  <label for="City" class="col-sm-8 form-label">City</label>
                  <div class="col-sm-4">
                  <select name="cars" class="form-control" onchange="citySelectionChange(this);">
                      <option value="Bengaluru" selected>Bengaluru</option>
                      <option value="Mumbai">Mumbai</option>
                  </select>
                </div>
                    <!--<input class="form-control" type="number" min="1" max="600" value="120" step="1"
                      id="City"></div>-->
                </div>
                
                <div class="form-group row">
                  <label class="col-sm-8 form-label" for="Population">Population</label>
                  <div class="col-sm-4">
                    <input class="form-control" type="number" 
                      id="Population" value="100000" readonly></div>
                </div>
                <div class="form-group row">
                  <label class="col-sm-8 form-label" for="Wards">Number of divisions (wards)</label>
                  <div class="col-sm-4">
                    <input class="form-control" type="number" 
                      id="Wards" value="198" readonly></div>
                </div>
                <div class="form-group row">
                  <label class="col-sm-8 form-label">Map</label>
                  <div class="col-sm-4"></div>
                </div>
                <div class="col align-self-end my-3">
                  <img src="simulator/images/bangalore-wards.png" alt="city map" width="35%">
                </div>
                <p class="section-title">Simulation Duration</p>
                <hr class="line-separator"/>
                <div class="form-group row">
                  <div class="col-sm-8"></div>
                  <label for="numDays" class="col-sm-8 form-label">Number of Days to Simulate</label>
                  <div class="col-sm-4">
                    <input class="form-control" type="number" min="1" max="600" value="120" step="1"
                      id="numDays"></div>
                </div>
                <p class="section-title">Disease Progression</p>
                <hr class="line-separator"/>
                <div class="form-group row">
                  <label class="col-sm-8 form-label" for="Incubation">Mean Incubation Period (days)</label>
                  <div class="col-sm-4"><input class="form-control" type="number" min="0" max="30" value="4.5" step="0.25"
                      id="Incubation" ></div>
                </div>
      
                <div class="form-group row">
                  <label for="asymptomaticMean" class="col-sm-8 form-label">Mean Asymptomatic/Pre Symptomatic Period (days) </label>
                  <div class="col-sm-4"><input class="form-control" type="number" min="0" max="30" value="0.5" step="0.25"
                      id="asymptomaticMean"></div>
                </div>
      
                <div class="form-group row">
                  <label for="symptomaticMean" class="col-sm-8 form-label">Mean Symptomatic Period (days)</label>
                  <div class="col-sm-4"><input class="form-control" type="number" min="0" max="30" value="5" step="0.25"
                      id="symptomaticMean"></div>
                </div>
      
                <div class="form-group row">
                  <label for="symtomaticFraction" class="col-sm-8 form-label">Symptomatic Fraction </label>
                  <div class="col-sm-4"><input class="form-control" type="number" min="0" max="1" value="0.66" step="0.01"
                      id="symtomaticFraction">
                  </div>
                </div>
      
                <div class="form-group row">
                  <label for="meanHospitalPeriod" class="col-sm-8 form-label">Mean Hospital Stay (days)</label>
                  <div class="col-sm-4"><input class="form-control" type="number" min="0" max="30" value="8" step="0.25"
                      id="meanHospitalPeriod"></div>
                </div>
      
                <div class="form-group row">
                  <label for="meanICUPeriod" class="col-sm-8 form-label">Mean ICU Stay (days)</label>
                  <div class="col-sm-4"><input class="form-control" type="number" min="0" max="30" value="8" step="0.25"
                      id="meanICUPeriod"></div>
                </div>
                <p class="section-title">Transmission Coefficients</p>
                <hr class="line-separator"/>
                <div class="form-group row">
                  <label for="betaHouse" class="col-sm-8 form-label">Households</label>
                  <div class="col-sm-4"><input class="form-control" type="number" min="0" max="2" value="0.47" step="0.01"
                      id="betaHouse"></div>
                </div>
      
                <div class="form-group row">
                  <label for="betaWork" class="col-sm-8 form-label">Workplaces</label>
                  <div class="col-sm-4"><input class="form-control" type="number" min="0" max="2" value="0.376" step="0.01"
                      id="betaWork"></div>
                </div>
      
                <div class="form-group row">
                  <label for="betaSchools" class="col-sm-8 form-label">Schools</label>
                  <div class="col-sm-4"><input class="form-control" type="number" min="0" max="2" value="0.752" step="0.01"
                      id="betaSchools"></div>
                </div>
      
                <div class="form-group row">
                  <label for="betaCommunity" class="col-sm-8 form-label">Community</label>
                  <div class="col-sm-4"><input class="form-control" type="number" min="0" max="2" value="0.3395" step="0.01"
                      id="betaCommunity"> </div>
                </div>
      
                <div class="form-group row">
                  <label for="betaPT" class="col-sm-8 form-label">Public Transport</label>
                  <div class="col-sm-4"><input type="number" class="form-control" min="0" max="2" value="0.01" step="0.01" id="betaPT"> </div>
                </div>
      
                <!--<div class="form-group row">
                  <label for="simNum" class="col-sm-4 col-form-label" style="display: none">Simulations Number</label>
                  <div class="col-sm-8"><input class="form-control" type="number" style="display: none" min="0" step="1"
                      max="1000" value="0" id="simNum"> </div>
                </div>-->
                <p class="section-title">Initialisation</p>
                <hr class="line-separator"/>
                <div class="form-group row">
                  <label for="initFrac" class="col-sm-8 form-label">Fraction Infected</label>
                  <div class="col-sm-4"><input class="form-control" type="number" min="0" max="1" value="0.001" id="initFrac">
                  </div>
                </div>
      
                <!--
                      <div class="row">
                        <b>Interventions</b>
                        <UL>
                        (a) case isolation,<br>
                        (b) home quarantine,<br>
                        (c) lockdown,<br>
                        (d) case isolation and home quarantine,<br> 
                        (e) these two along with social distancing of
                        those above 70 years of age,<br> 
                        (f) 21 days of lockdown, followed by 21 days of (e), 
                        followed by case isolation.<br>
                        </UL>
                      </div>
      
                      <div class="row">
                      <label for="intervention">Intervention Method</label>
                      
                      <div class="input-group mb-3">
                        <div class="input-group-prepend">
                          <label class="input-group-text" for="interventions">Intervention Method</label>
                        </div>
                        <select class="custom-select" id="interventions" name="interventions" style="width: 300px">
                          <option value="0">No Intervention</option>
                          <option value="1">Case Isolation</option>
                          <option value="2">Home Quarantine</option>
                          <option value="3">Lockdown</option>
                          <option value="4">Case Isolation and Home Quarantine</option>
                          <option value="5">Case Isolation, Home Quarantine and Social Distancing of those above 70 years of age</option>   
                          <option value="6">20 days of lockdown followed by 21 days of F, followed by 21 days of Case Isolation</option>
                          <option value="7">21 days of Lockdown</option>
                          <option value="9">The simulation starts on March 1, with an initial infected population of size 10 in a total population of 100000. Lockdown is introduced on the 25th day for a duration of 21 days, followed by home quarantine of infected households and school and college closures for 21 days, followed by school and college closures for another 42 days</option>
                          <option value="10">The simulation starts on March 1, with an initial infected population of size 10 in a total population of 100000. Lockdown is introduced on the 25th day for a duration of 21 days, followed by home quarantine of infected households and school and college closures for 21 days</option>
                          <option value="11">The simulation starts on March 1, with an initial infected population of size 10 in a total population of 100000. Lockdown is introduced on the 25th day for a duration of 21 days, followed by home quarantine of infected households, school and college closures, and offices working at half strength for 30 days</option>   
                          <!--
                          <option value="9">LD_21_CI_HQ_SD70_SC_21_SC_42</option>
                          <option value="9">LD_21_CI_HQ_SD70_SC_21</option>
                          <option value="10">LD_21_CI_HQ_SD70_SC_OE_30</option>   
                        </select></div>
                      </div>
                      -->
                <p class="section-title">Intervention</p>
                <hr class="line-separator"/>
                <div class="form-group row">
                  <div class="col-sm-12">
                    <!--<legend class="w-auto" style="font-size: large; font-weight:bold;">Intervention Method</legend>-->
                    <div class="radio">
                    <label>
                      <input type="radio" name="interventions2" value="0" checked="checked">No Intervention
                    </label>
                  </div>
                  <div class="radio">
                    <label>
                      <input type="radio" name="interventions2" value="1">Case Isolation
                    </label>
                  </div>
                    <div class="radio">
                    <label>
                      <input type="radio" name="interventions2" value="2">Home Quarantine
                    </label>
                    </div>
                    <div class="radio">
                    <label>
                      <input type="radio" name="interventions2" value="3">Lockdown
                    </label>
                    </div>
                    <div class="radio">
                    <label>
                      <input type="radio" name="interventions2" value="4">Case Isolation and Home Quarantine
                    </label>
                    </div>
                    <div class="radio">
                    <label>
                      <input type="radio" name="interventions2" value="5">Case Isolation, Home Quarantine and Social
                      Distancing of those above 70 years of age</input>
                    </label>
                    </div>
                    <div class="radio">
                    <label>
                      <input type="radio" name="interventions2" value="6">20 days of Lockdown followed by 21 days of Case
                      Isolation+Home Quarantine+Social Distancing of those above 70 years, followed by 21 days of Case
                      Isolation</input>
                    </label>
                    </div>
                    <div class="radio">
                    <label>
                      <input type="radio" name="interventions2" value="7">21 days of Lockdown</input>
                    </label>
                    </div>
                    <div class="radio">
                    <label>
                      <input type="radio" name="interventions2" value="8">The simulation starts on March 1, with an initial
                      infected population of size 10 in a total population of 100000. Lockdown is introduced on the 25th day
                      for a duration of 21 days, followed by home quarantine of infected households and school and college
                      closures for 21 days, followed by school and college closures for another 42 days</input>
                    </label>
                    </div>
                    <div class="radio">
                    <label>
                      <input type="radio" name="interventions2" value="9">The simulation starts on March 1, with an initial
                      infected population of size 10 in a total population of 100000. Lockdown is introduced on the 25th day
                      for a duration of 21 days, followed by home quarantine of infected households and school and college
                      closures for 21 days</input>
                    </label>
                    </div>
                    <div class="radio">
                    <label>
                      <input type="radio" name="interventions2" value="10">The simulation starts on March 1, with an initial
                      infected population of size 10 in a total population of 100000. Lockdown is introduced on the 25th day
                      for a duration of 21 days, followed by home quarantine of infected households, school and college
                      closures, and offices working at half strength for 30 days</input>
                    </label>
                    </div>
                  </div>
                </div>
                <!-- <label for="intervention">Intervention Method</label> -->
                <!-- <div class="form-group row py-3">
                  <label for="compliance" class="col-sm-4 col-form-label">Intervention Method</label>
                  <div class="col-sm-8">
                  <select id="interventions" class="form-control" name="interventions">
                  <option value="0">No Intervention</option>
                  <option value="1">Case Isolation</option>
                  <option value="2">Home Quarantine</option>
                  <option value="3">Lockdown</option>
                  <option value="4">Case Isolation and Home Quarantine</option>
                  <option value="5">Case Isolation, Home Quarantine and Social Distancing of those above 70 years of age</option>   
                  <option value="6">20 days of lockdown followed by 21 days of F, followed by 21 days of Case Isolation</option>
                  <option value="7">21 days of Lockdown</option>
                  <option value="9">The simulation starts on March 1, with an initial infected population of size 10 in a total population of 100000. Lockdown is introduced on the 25th day for a duration of 21 days, followed by home quarantine of infected households and school and college closures for 21 days, followed by school and college closures for another 42 days</option>
                  <option value="10">The simulation starts on March 1, with an initial infected population of size 10 in a total population of 100000. Lockdown is introduced on the 25th day for a duration of 21 days, followed by home quarantine of infected households and school and college closures for 21 days</option>
                  <option value="11">The simulation starts on March 1, with an initial infected population of size 10 in a total population of 100000. Lockdown is introduced on the 25th day for a duration of 21 days, followed by home quarantine of infected households, school and college closures, and offices working at half strength for 30 days</option>   
                </select>
                </div>
              </div> -->
                <div class="form-group row">
                  <label for="compliance" class="col-sm-8 form-label">Compliance Probability</label>
                  <div class="col-sm-4"><input class="form-control" type="number" min="0" max="1" value="0.9" id="compliance">
                  </div>
                </div>
            <p class="section-title">Resources and Reference</p>
            <hr class="line-separator"/>
            <div class="form-group row">
              <div class="col-sm-12">
                This is a city-scale agent-based simulator for the city of Bengaluru, built based on the descriptions given in this 
                <A HREF="https://www.imperial.ac.uk/mrc-global-infectious-disease-analysis/covid-19/report-9-impact-of-npis-on-covid-19/">
                    study</A> of non-pharmaceutical interventions (from the Imperial College, London), this
                <A HREF="https://www.nature.com/articles/nature04017">paper</A> on pandemics in SE Asia, and its associated 
                <A HREF="https://static-content.springer.com/esm/art%3A10.1038%2Fnature04017/MediaObjects/41586_2005_BFnature04017_MOESM1_ESM.pdf">supplementary material</A>. <br><br>
      
                The simulator instantiates a smaller scale Bengaluru with population 100,000 across its 
                198 wards. The population distribution, employed fraction, age distribution, and 
                household size distribution are based on 2011 census data (with scaling for population growth).
                Commute distances, workplace sizes, and school sizes are based on Thailand data given in the aforementioned 
                <A HREF="https://static-content.springer.com/esm/art%3A10.1038%2Fnature04017/MediaObjects/41586_2005_BFnature04017_MOESM1_ESM.pdf">supplementary material</A>. 
                <br>
                <br>
                A description of the simulator and its implementation is under preparation.
              </div>
            </div>
      
              </form>
        <div class="col-sm-12 run-btn-cnt">
          <button type="button" class="btn btn-success pull-right" id="run_button" onclick="clear_plots();">Run</button>
          <button type="button" class="btn btn-stop pull-right" id="sim_stop" style="display: none" onclick="stop_sim();">Stop
            Simulation</button>
        </div>
      </div>
      <!-- <div class="column">
                
                <div id="status"></div>

                <div id="num_affected_plot"></div>
                <div id="num_infected_plot"></div>
                <div id="num_exposed_plot"></div>
                <div id="num_hospitalised_plot"></div>
                <div id="num_critical_plot"></div>
                <div id="num_fatalities_plot"></div>
                <div id="num_recovered_plot"></div>
                
            </div> -->
      <div class="col-sm-6 right-pane">
        <div class="row right-top">
          <div class="col-sm-12">
          <label class="pull-left">Simulation Results</label>
          <!-- <div id="sim_progress"></div> -->
          <span class="status-bar" id="status" style="display: none;"></span>
        </div>
        </div>
        <div class="sim-lane">
          <div class="custom-loader" id="no-data">
            <span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span>
            Enter simulation parameter values and
            Run the simulation to see results
          </div>

          <div class="custom-loader" id="in-progress" style="display: none;">
            <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span>
            Initializing Simulation...
          </div>

          <div class="plots-area" id="plots-area" style="display: none;">
          <div class="custom-card">
            <div id="num_affected_plot_2"></div>
          </div>
          <div class="custom-card">
            <div id="num_infected_plot_2"></div>
          </div>
       

        
          <div class="custom-card">
            <div id="num_hospitalised_plot_2"></div>
          </div>
          <div class="custom-card">
            <div id="num_critical_plot_2"></div>
          </div>
       

       
          <div class="custom-card">
            <div id="num_fatalities_plot_2"></div>
          </div>
          <div class="custom-card">
            <div id="lambda_evolution"></div>
          </div>
        </div>
        </div>
      
      </div>
    </div>
  </div>
  <div id="num_exposed_plot_2"></div>
  <div id="num_recovered_plot_2"></div>
  <!-- <div class="jumbotron text-center" style="margin-bottom:0;background-color:#AAAA99";> -->
  <!-- <div class="jumbotron text-center" style="display:flex;align-items:center;background-color:#776633;";> -->
  <!-- <div class="d-flex bg-dark p-1 text-white justify-content-between">
    <div class="d-flex px-3"><b><a href="mailto:epiSim@iisc.sc.in" style="color:white"><i class="fa fa-envelope"
            aria-hidden="true"></i> Contact us</a></b></div>
    <div class="d-flex px-3">This work is licensed under Apache 2.0 license.<br>Copyright [2020] [Indian Institute of
      Science, Bangalore]</div>
  </div> -->

  <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
    integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
    integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
    crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  <script type="text/javascript" src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/6.6.1/math.js"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/jstat@latest/dist/jstat.min.js"></script>
  
  <script type="text/javascript" src="https://d3js.org/d3-random.v2.min.js"></script>
  <script data-main="simulator/javascripts/init" src="simulator/libs/require.js"></script>
  <script type="text/javascript" src="simulator/javascripts/random-0.26.js"></script>
  <script type="text/javascript" src="simulator/javascripts/interventions.js"></script>
  <script type="text/javascript" src="simulator/javascripts/initialise_network.js"></script>
  <script type="text/javascript" src="simulator/javascripts/controller/viewController.js"></script>
  <script type="text/javascript" src="simulator/javascripts/initSimulation.js"></script>
  <script type="text/javascript" src="simulator/javascripts/compute.js"></script>
  <script type="text/javascript" src="simulator/javascripts/splitter.js"></script>
</body>

</html>