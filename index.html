<!DOCTYPE html>
<!--Copyright [2020] [Indian Institute of Science, Bangalore]
SPDX-License-Identifier: Apache-2.0-->
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
        <title>Epidemic Simulator (City-Scale)</title>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
        <link rel="stylesheet" href="simulator/css/font-awesome.min.css">
        <link rel="icon" type="image/png" sizes="32x32" href="https://iisc.ac.in/wp-content/themes/iisc/images/favicon/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="96x96" href="https://iisc.ac.in/wp-content/themes/iisc/images/favicon/favicon-96x96.png">

        <style>
            body {
                font-family: Arial, "Helvetica Neue", Helvetica, sans-serif;
                -webkit-font-smoothing: antialiased;
                text-rendering: optimizeLegibility;
                line-height: 1.6;
            }
            #status{
                text-align: center;
            }
            .content {
                max-width: 35em;
                margin: 0 auto;
                padding: 0 10px;
            }
            .nav {
                text-align: center;
                margin-top: 10px;
                margin-bottom: 10px;
            }
            img {
                max-width: 100%;
                display: block;
                margin: 0 auto;
            }
            a {
                text-decoration: none;
            }
            a:link, .nav a, .nav a:visited {
                color: #07C;
            }
            a:hover, a:active, .nav a:visited:active, .nav a:visited:hover {
                color: #3af;
            }
            a:visited {
                color: #005999;
            }
            .column {
                float: left;
                width: 40%;
                padding: 15px;
            }
          .jumbotron {
          display:flex;
          align-items:center;
          background-color:#776633;
          }
          .fakeimg {
            height: 100px;
            background: #aaa;
          }
          input[type="number"] {
            width: 70px;
            height: 25px;
            padding: 2px
            display: inline-block;
            margin-left: 6px;
        }

        .radio-inline {
          display: block;
          padding: 5px 5px; /* optional */
        }

        .fieldset
        {
          background-color:#CCC;
        }
        .legend
        {
          margin-bottom:0px;
          margin-left:16px;
          font-size:medium;  
        }
        </style>

        <!--
        <style>

            @media screen and (max-width: 800px) {
                .column {
                    float: left;
                    width: 90%;
                    padding: 15px;
                    margin: 0px 10px 0px 10px;
                }
            }
            /* Clear floats after the columns */
            .row:after {
                content: "";
                display: table;
                clear: both;
            }

            input[type="number"] {  
                width: 30%;
                margin-left:20px;
	}

        </style>
        -->
    </head>
    <body>
      <section id="header">
      <div class="d-flex bg-dark justify-content-between align-items-center">
            <div class="d-flex p-2 text-white">
              <div class="d-flex flex-column">
                <div class="d-flex"><h5><a href="https://cni.iisc.ac.in" style="color:white">Centre for Network Intelligence,</a></h5></div>
                <div class="d-flex"><h5><a href="https://cps.iisc.ac.in" style="color:white">Robert Bosch Centre for CPS</a></h5></div>
              </div>
            </div>
            <div class="d-flex p-2 text-white justify-content-center">
              <h3>Epidemic Simulator (City-Scale)</h3>
            </div>
            <div class="d-flex px-4 justify-content-end">
              <a href="https://www.iisc.ac.in"><img src="simulator/images/iisc_1.png" alt="IISc logo" width="70px"></a>
            </div>
      </div>
      </section>
      <!--
      <nav class="navbar navbar-expand-sm bg-dark navbar-dark">
        <a class="navbar-brand" href="#">Navbar</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="collapsibleNavbar">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link" href="#">Link</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Link</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Link</a>
            </li>    
          </ul>
        </div>  
      </nav>
      -->

      <div class="container-fluid">
        <div class="row">
          <div class="col my-3">
            This is a city-scale agent-based simulator for the city of Bengaluru, built based on the descriptions given in this 
            <A HREF="https://www.imperial.ac.uk/mrc-global-infectious-disease-analysis/covid-19/report-9-impact-of-npis-on-covid-19/">
                study</A> of non-pharmaceutical interventions (from the Imperial College, London), this
            <A HREF="https://www.nature.com/articles/nature04017">paper</A> on pandemics in SE Asia, and its associated 
            <A HREF="https://static-content.springer.com/esm/art%3A10.1038%2Fnature04017/MediaObjects/41586_2005_BFnature04017_MOESM1_ESM.pdf">supplementary material</A>. <br><br>

            The simulator instantiates a smaller scale Bengaluru with population 100,000 across its 
            198 wards. The population distribution, employed fraction, age distribution, and 
            household size distribution are based on 2011 census data (with scaling for population growth).
            Commute distances, workplace sizes, and school sizes are based on Thailand data given in the aforementioned 
            <A HREF="https://static-content.springer.com/esm/art%3A10.1038%2Fnature04017/MediaObjects/41586_2005_BFnature04017_MOESM1_ESM.pdf">supplementary material</A>. 
            <br>
            <br>
            A description of the simulator and its implementation is under preparation.
          </div>
          <div class="col align-self-end my-3">
                  <img src="simulator/images/bangalore-wards.png" alt="city map" width="35%">
          </div>
        </div>
        <div class="row">
            <div class="col-6 col-md-4 px-3" id="controls">
              <div class="row py-3 pl-2" >
                <div class="col"><b>You can adjust the following parameters before 
                    launching the simulator</b>
                </div>
                <div class="col justify-content-left">
                  <button type="button" class="btn btn-primary" id="run_button" onclick="clear_plots();">Run</button>
                <button type="button" class="btn btn-danger" id="sim_stop" style="display: none" onclick="stop_sim();">Stop Simulation</button>
                </div>
              </div>

                <div class="row">
                  <div class="col"><label for="numDays">Number of Days to Simulate</label></div>
                  <div class="col"><input type="number" min="1" max="600" value="120" step="1" id="numDays"></div>
                </div>

                <b>Disease Progression</b>
                <div class="row">
                <div class="col"><label  for="Incubation">Mean Incubation Period (days)</label></div>
                <div class="col"><input  type="number"  min="0" max="30" value="4.5"  step="0.25"  id="Incubation"></div>
                </div>
              
                <div class="row">
                <div class="col"><label  for="asymptomaticMean">Mean Asymptomatic Period (days) </label></div>
                <div class="col"><input type="number"  min="0" max="30" value="0.5"  step="0.25"  id="asymptomaticMean"></div>
                </div>

                <div class="row">
                <div class="col"><label  for="symptomaticMean">Mean Symptomatic Period (days)</label></div>
                <div class="col"><input type="number"  min="0" max="30" value="5"  step="0.25"  id="symptomaticMean"></div>
                </div>

                <div class="row">
                <div class="col"><label  for="symtomaticFraction">Symptomatic Fraction </label></div>
                <div class="col"><input type="number"  min="0" max="1" value="0.66"  step="0.01" id="symtomaticFraction"></div>
                </div>

                <div class="row">
                <div class="col"><label  for="meanHospitalPeriod">Mean Hospital Stay (days)</label></div>
                <div class="col"><input type="number" min="0" max="30" value="8"  step="0.25"  id="meanHospitalPeriod" ></div>
                </div>

                <div class="row">
                <div class="col"><label  for="meanICUPeriod">Mean ICU Stay (days)</label></div>
                <div class="col"><input type="number" min="0" max="30" value="8"  step="0.25" id="meanICUPeriod" ></div>
                </div>

                <b>Transmission Coefficients</b>
                <div class="row">
                <div class="col"><label  for="betaHouse">Households</label></div>
                <div class="col"><input type="number" min="0" max="2" value="0.47"  step="0.01" id="betaHouse"></div>
                </div>

                <div class="row">
                <div class="col"><label  for="betaWork">Workplaces</label></div>
                <div class="col"><input type="number" min="0" max="2" value="0.376"  step="0.01" id="betaWork"></div>
                </div>

                <div class="row">
                <div class="col"><label  for="betaSchools">Schools</label></div>
                <div class="col"><input type="number"  min="0" max="2" value="0.752"  step="0.01" id="betaSchools"></div>
                </div>

                <div class="row">
                <div class="col"><label  for="betaCommunity">Community</label></div>
                <div class="col"><input type="number"   min="0" max="2" value="0.3395"  step="0.01" id="betaCommunity"> </div>
                </div>
                
                <div class="row">
                <div class="col"><label  for="betaPT">Public Transport</label></div>
                <div class="col"><input type="number"   min="0" max="2" value="0.01"  step="0.01" id="betaPT"> </div>
                </div>
	
                <div class="row">
                <div class="col"><label  for="simNum" style="display: none">Simulations Number</label></div>
                <div class="col"><input type="number"  style="display: none" min="0" step="1" max="1000" value="0" id="simNum"> </div>
                </div>

		          <b>Initialisation</b>
                <div class="row">
                <div class="col"><label  for="initFrac">Fraction Infected</label></div>
                <div class="col"><input type="number"  min="0" max="1" value="0.001" step="0.0001"  id="initFrac"></div>
                </div>
                
                  <!--
                <div class="row">
                  <b>Interventions</b>
                  <UL>
                  (a) case isolation,<br>
                  (b) home quarantine,<br>
                  (c) lockdown,<br>
                  (d) case isolation and home quarantine,<br> 
                  (e) these two along with social distancing of
                  those above 70 years of age,<br> 
                  (f) 21 days of lockdown, followed by 21 days of (e), 
                  followed by case isolation.<br>
                  </UL>
                </div>

                <div class="row">
                <label for="intervention">Intervention Method</label>
                
                <div class="input-group mb-3">
                  <div class="input-group-prepend">
                    <label class="input-group-text" for="interventions">Intervention Method</label>
                  </div>
                  <select class="custom-select" id="interventions" name="interventions" style="width: 300px">
                    <option value="0">No Intervention</option>
                    <option value="1">Case Isolation</option>
                    <option value="2">Home Quarantine</option>
                    <option value="3">Lockdown</option>
                    <option value="4">Case Isolation and Home Quarantine</option>
                    <option value="5">Case Isolation, Home Quarantine and Social Distancing of those above 70 years of age</option>   
                    <option value="6">20 days of lockdown followed by 21 days of F, followed by 21 days of Case Isolation</option>
                    <option value="7">21 days of Lockdown</option>
                    <option value="9">The simulation starts on March 1, with an initial infected population of size 10 in a total population of 100000. Lockdown is introduced on the 25th day for a duration of 21 days, followed by home quarantine of infected households and school and college closures for 21 days, followed by school and college closures for another 42 days</option>
                    <option value="10">The simulation starts on March 1, with an initial infected population of size 10 in a total population of 100000. Lockdown is introduced on the 25th day for a duration of 21 days, followed by home quarantine of infected households and school and college closures for 21 days</option>
                    <option value="11">The simulation starts on March 1, with an initial infected population of size 10 in a total population of 100000. Lockdown is introduced on the 25th day for a duration of 21 days, followed by home quarantine of infected households, school and college closures, and offices working at half strength for 30 days</option>   
                    <!--
                    <option value="9">LD_21_CI_HQ_SD70_SC_21_SC_42</option>
                    <option value="9">LD_21_CI_HQ_SD70_SC_21</option>
                    <option value="10">LD_21_CI_HQ_SD70_SC_OE_30</option>   
                  </select></div>
                </div>
                -->

                <div class="row px-3">
                    <fieldset class="border p-2" style="border:2px">
                        <legend class="w-auto" style="font-size: large; font-weight:bold;">Intervention Method</legend>
                        <p>Simulations under all scenarios are assumed to begin on March 1, 2020. Interventions begin on 25th day of simulation and continue indefinitely unless an intervention duration is mentioned.</p>
                        <label class="radio-inline">
                            <input type="radio" name="interventions2" value="0" checked="checked">No Intervention
                        </label>
                        <label class="radio-inline">
                            <input type="radio" name="interventions2" value="1">Case Isolation
                        </label>
                        <label class="radio-inline">
                            <input type="radio" name="interventions2" value="2">Home Quarantine of infected households
                        </label>
                        <label class="radio-inline">
                            <input type="radio" name="interventions2" value="3">Lockdown
                        </label>
                        <label class="radio-inline">
                            <input type="radio" name="interventions2" value="4">[Case Isolation + Home Quarantine of infected households]
                        </label>
                        <label class="radio-inline">
                            <input type="radio" name="interventions2" value="5">[Case Isolation + Home Quarantine of infected households + Social Distancing of those above 70 years of age]</input>   
                        </label>
                        <label class="radio-inline">
                            <input type="radio" name="interventions2" value="6">21 days of Lockdown followed by 21 days of [Case Isolation + Home Quarantine + Social Distancing of those above 70 years], followed by 21 days of Case Isolation</input>
                        </label>
                        <label class="radio-inline">
                            <input type="radio" name="interventions2" value="7">21 days of Lockdown</input>
                        </label>
                        <label class="radio-inline">
                            <input type="radio" name="interventions2" value="8">21 days of Lockdown followed by 21 days of [home quarantine of infected households + school and college closures], followed by 42 days of school and college closure</input>
                        </label>
                        <label class="radio-inline">
                            <input type="radio" name="interventions2" value="9">21 days of Lockdown followed by 21 days of [home quarantine of infected households + school and college closures]</input>
                        </label>
                        <label class="radio-inline">
                            <input type="radio" name="interventions2" value="10">21 days of Lockdown followed by 30 days of [home quarantine of infected households + school and college closures + offices working at half strength]</input>
                        </label>
                    </fieldset>
                </div>

                <div class="row py-3">
                <div class="col"><label  for="compliance">Compliance Probability</label></div>
                <div class="col"><input  type="number" min="0" max="1" value="0.9"  id="compliance" ></div>
                </div>


            </div>
            <!-- <div class="column">
                
                <div id="status"></div>

                <div id="num_affected_plot"></div>
                <div id="num_infected_plot"></div>
                <div id="num_exposed_plot"></div>
                <div id="num_hospitalised_plot"></div>
                <div id="num_critical_plot"></div>
                <div id="num_fatalities_plot"></div>
                <div id="num_recovered_plot"></div>
                
            </div> -->
            <div class="col-12 col-md-7">
              <div class="row justify-content-center">
                <div id="sim_progress"></div>
                <div class="d-flex p-2 bg-success text-white" id="status"></div>
              </div>
              <div class="row">
                <div class="col">
                  <div id="num_affected_plot_2"></div>
                </div>
                <div class="col">
                  <div id="num_infected_plot_2"></div>
                </div>
              </div>

              <div class="row">
                <div class="col">
                  <div id="num_hospitalised_plot_2"></div>
                </div>
                <div class="col">
                  <div id="num_critical_plot_2"></div>
                </div>
              </div>

              <div class="row">
                <div class="col">
                  <div id="num_fatalities_plot_2"></div>
                </div>
                <div class="col">
                  <div id="lambda_evolution"></div>
                </div>
              </div> 
                
            </div>
        </div>
      </div>
                  <div id="num_exposed_plot_2"></div>
                  <div id="num_recovered_plot_2"></div>
                  <!-- <div class="jumbotron text-center" style="margin-bottom:0;background-color:#AAAA99";> -->
                  <!-- <div class="jumbotron text-center" style="display:flex;align-items:center;background-color:#776633;";> -->
      <div class="d-flex bg-dark p-1 text-white justify-content-between">
        <div class="d-flex px-3"><b><a href="mailto:epiSim@iisc.sc.in" style="color:white"><i class="fa fa-envelope" aria-hidden="true"></i> Contact us</a></b></div>
        <div class="d-flex px-3">This work is licensed under Apache 2.0 license.<br>Copyright [2020] [Indian Institute of Science, Bangalore]</div>
      </div>

        <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
        <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
        <script type="text/javascript" src="https://cdn.plot.ly/plotly-latest.min.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/6.6.1/math.js"></script>
        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/jstat@latest/dist/jstat.min.js"></script>
        <script type="text/javascript" src="https://d3js.org/d3-random.v2.min.js"></script>
        <script type="text/javascript" src="simulator/javascripts/random-0.26.js"></script>
        <script type="text/javascript" src="simulator/javascripts/interventions.js"></script>
        <script type="text/javascript" src="simulator/javascripts/initialise_network.js"></script>
        <script type="text/javascript" src="simulator/javascripts/sim.js"></script>        
    </body>
</html>
